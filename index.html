<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frontier</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/login.css">
    <link rel="stylesheet" href="css/frontier.css">
    <link rel="icon" href="img/Logosolo png.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bcryptjs/2.4.3/bcrypt.min.js"></script>
    <link rel="manifest" href="manifest.json">
</head>
<body style="background-image: url(img/backlogin.png);">
    <div class="container">
        <div class="login">
            <h2><p>Login <strong>Front<span>ier<span id="tm">™</span></span></strong></p></h2>
            <h4>Seja bem vindo(a)!</h4>
            <label><h5>Usuário: </h5>
                <input type="text" placeholder="Seu Usuário">
            </label>
            <label><h5>Senha: </h5>
                <input type="password" placeholder="Sua Senha" id="senha">
            </label>
            <div class="exibir-senha" onclick="toggleColor()"><h5>Exibir senha</h5></div>
            <button onclick="entrar()">Entrar</button>
        </div>
    </div>
<script>
// Registrar o Service Worker
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js')
        .then(() => console.log('Service Worker registrado com sucesso!'))
        .catch(err => console.error('Erro ao registrar o Service Worker:', err));
}

// Instalação do PWA
let deferredPrompt;
const installButton = document.getElementById('installPWA');

window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    installButton.style.display = 'block';

    installButton.addEventListener('click', () => {
        deferredPrompt.prompt();
        deferredPrompt.userChoice.then((choiceResult) => {
            if (choiceResult.outcome === 'accepted') {
                console.log('Usuário aceitou a instalação do PWA');
            }
            installButton.style.display = 'none';
            deferredPrompt = null;
        });
    });
});

// Verifica se já está instalado
window.addEventListener('appinstalled', () => {
    console.log('PWA instalado com sucesso!');
    installButton.style.display = 'none';
});

// Notificações Push
if ('Notification' in window && 'serviceWorker' in navigator) {
    Notification.requestPermission().then(permission => {
        if (permission === 'granted') {
            navigator.serviceWorker.ready.then(registration => {
                registration.showNotification("Frontier", {
                    body: "Bem-vindo ao nosso PWA!",
                    icon: "icon-192x192.png"
                });
            });
        }
    });
}














    
    
function toggleColor() {
    const box = document.querySelector('.exibir-senha');
    const text = box.querySelector('h5');
    const senhaInput = document.getElementById('senha'); // Pegando o input de senha
    const currentColor = window.getComputedStyle(box).backgroundColor;

    // Alternar o tipo de input entre password e text
    if (senhaInput.type === "password") {
        senhaInput.type = "text";
        box.style.backgroundColor = "#F7B40D"; // Amarelo
        text.textContent = "Ocultar senha";
    } else {
        senhaInput.type = "password";
        box.style.backgroundColor = "#0f0f41"; // Azul escuro
        text.textContent = "Exibir senha";
    }

    box.style.color = "white";
}
</script>

<script src="js/login.js" type="module"></script>
</body>
</html>
